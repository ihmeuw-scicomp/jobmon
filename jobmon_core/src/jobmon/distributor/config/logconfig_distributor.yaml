# Distributor-specific logconfig for jobmon components
# Console logging by default, OTLP can be enabled via configuration overrides

version: 1
disable_existing_loggers: false

# Use existing shared formatters
formatters: !template formatters

# Distributor handlers (console by default, OTLP via overrides)
handlers:
  # Console handler for distributor subprocess
  console:
    class: logging.StreamHandler
    level: INFO
    formatter: console_default
    stream: ext://sys.stdout

# Distributor logger configurations (console by default, OTLP via config overrides)
loggers:
  # Primary distributor operations
  jobmon.distributor:
    handlers: [console]
    level: INFO
    propagate: true
    
  # Cluster interface operations (important for distributor)
  jobmon.core:
    handlers: [console]
    level: WARNING
    propagate: true
    
# OTLP can be enabled via configuration overrides:
# 
# Example file-based override (logging.distributor_logconfig_file):
# handlers:
#   otlp_distributor:
#     class: jobmon.core.otlp.JobmonOTLPLoggingHandler
#     level: INFO
#     formatter: otlp_default
#     exporter:
#       module: opentelemetry.exporter.otlp.proto.grpc._log_exporter
#       class: OTLPLogExporter
#       endpoint: http://localhost:4317
#       timeout: 30
#       insecure: true
#       # Long-running process batching settings
#       max_export_batch_size: 8
#       export_timeout_millis: 3000
#       schedule_delay_millis: 1000
#       max_queue_size: 2048
# loggers:
#   jobmon.distributor:
#     handlers: [console, otlp_distributor]
#
# Example section-based override (logging.distributor.*):
# logging:
#   distributor:
#     handlers:
#       otlp_distributor: { ... }
#     loggers:
#       jobmon.distributor:
#         handlers: [console, otlp_distributor]