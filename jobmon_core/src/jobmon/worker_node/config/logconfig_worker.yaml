# Worker-specific logconfig for jobmon components  
# Console logging by default, OTLP can be enabled via configuration overrides

version: 1
disable_existing_loggers: false

# Use existing shared formatters
formatters: !template formatters

# Worker handlers (console by default, OTLP via overrides)
handlers:
  # Console handler for worker subprocess
  console:
    class: logging.StreamHandler
    level: INFO
    formatter: structlog_text
    stream: ext://sys.stdout

# Worker logger configurations (console by default, OTLP via config overrides)  
loggers:
  # Worker node operations
  jobmon.worker_node:
    handlers: [console]
    level: INFO
    propagate: false
  
  # Core job processing
  jobmon.core:
    handlers: [console]
    level: WARNING
    propagate: false
    
# OTLP can be enabled via configuration overrides:
# 
# Example file-based override (logging.worker_logconfig_file):
# handlers:
#   otlp_worker:
#     class: jobmon.core.otlp.JobmonOTLPLoggingHandler
#     level: INFO
#     formatter: otlp_default
#     exporter:
#       module: opentelemetry.exporter.otlp.proto.grpc._log_exporter
#       class: OTLPLogExporter
#       endpoint: http://localhost:4317
#       timeout: 30
#       insecure: true
#       # Short-lived process batching settings
#       max_export_batch_size: 2
#       export_timeout_millis: 1000
#       schedule_delay_millis: 200
#       max_queue_size: 512
# loggers:
#   jobmon.worker_node:
#     handlers: [console, otlp_worker]
#
# Example section-based override (logging.worker.*):
# logging:
#   worker:
#     handlers:
#       otlp_worker: { ... }
#     loggers:
#       jobmon.worker_node:
#         handlers: [console, otlp_worker]