# Server-specific logconfig for jobmon (OTLP disabled)
# This uses shared templates from core and provides structlog console logging

version: 1
disable_existing_loggers: false

# Import shared formatters from core templates
formatters: !template formatters

# Server handlers
handlers:
  # Shared console handler pattern
  console_default:
    class: logging.StreamHandler
    level: INFO
    formatter: console_default

  # Shared structlog console handler pattern
  console_structlog:
    class: logging.StreamHandler
    level: INFO
    formatter: structlog_text

  # JSON console handler for production
  console_json:
    class: logging.StreamHandler
    level: INFO
    formatter: structlog_json

# Server logger configurations (console only by default)
loggers:
  # Server jobmon logging with structlog (console only by default)
  jobmon:
    handlers: [console_structlog]
    level: INFO
    propagate: false

  # Server web module
  jobmon.server.web:
    handlers: [console_structlog] 
    level: INFO
    propagate: false

  # Standard server library loggers using shared console pattern
  sqlalchemy:
    handlers: [console_default]
    level: WARN
    propagate: false

  uvicorn.access:
    handlers: [console_default]
    level: INFO
    propagate: false

  uvicorn.error:
    handlers: [console_default]
    level: INFO
    propagate: false

# Root logger fallback (console only)
root:
  handlers: [console_default]
  level: WARNING 